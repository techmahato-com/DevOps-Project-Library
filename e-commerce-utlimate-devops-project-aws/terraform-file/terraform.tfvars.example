# AWS Configuration
aws_region = "us-east-1"

# Project Configuration
project_name = "three-tier-vpc"
environment  = "dev"
owner        = "DevOps-Team"

# VPC Configuration
vpc_name = "main-vpc"
vpc_cidr = "10.0.0.0/16"

# Availability Zones
availability_zones = ["us-east-1a", "us-east-1b"]

# Subnet Configuration
public_subnets   = ["10.0.1.0/24", "10.0.2.0/24"]
private_subnets  = ["10.0.11.0/24", "10.0.12.0/24"]
database_subnets = ["10.0.21.0/24", "10.0.22.0/24"]

# NAT Gateway Configuration
enable_nat_gateway = true
single_nat_gateway = false # Set to true for cost optimization in dev

# DNS Configuration
enable_dns_hostnames = true
enable_dns_support   = true

# VPN Gateway (optional)
enable_vpn_gateway = false

# VPC Flow Logs
enable_flow_log           = true
flow_log_destination_type = "s3" # Options: "s3" or "cloud-watch-logs"

# Bastion Host Configuration
bastion_instance_type       = "t3a.large"
bastion_root_volume_size    = 50
bastion_allowed_cidr_blocks = ["0.0.0.0/0"] # Restrict this to your IP for security
bastion_create_key_pair     = true
bastion_public_key          = "" # Add your SSH public key here
bastion_existing_key_name   = "" # Use existing key pair name if create_key_pair = false
bastion_associate_public_ip = true
bastion_enable_ssm_access   = true # Enable SSM Session Manager access

# EKS Configuration
create_eks_cluster                       = true
eks_cluster_name                         = "" # Will use project-environment format
eks_cluster_version                      = "1.32"
eks_cluster_endpoint_private_access      = true
eks_cluster_endpoint_public_access       = false # Set to true for dev environment
eks_cluster_endpoint_public_access_cidrs = ["0.0.0.0/0"] # Restrict in production
eks_enable_irsa                          = true

eks_node_groups = {
  application = {
    instance_types = ["t3a.medium"]
    capacity_type  = "ON_DEMAND"
    scaling_config = {
      desired_size = 2
      max_size     = 5
      min_size     = 1
    }
    disk_size = 50
    labels = {
      WorkloadType = "web"
    }
    taints = [
      {
        key    = "workload-type"
        value  = "web"
        effect = "NO_SCHEDULE"
      }
    ]
  }
  backend = {
    instance_types = ["t3a.medium"]
    capacity_type  = "ON_DEMAND"
    scaling_config = {
      desired_size = 2
      max_size     = 4
      min_size     = 1
    }
    disk_size = 50
    labels = {
      WorkloadType = "backend"
    }
    taints = [
      {
        key    = "workload-type"
        value  = "backend"
        effect = "NO_SCHEDULE"
      }
    ]
  }
  monitoring = {
    instance_types = ["t3a.medium", "t3.medium", "t3a.large", "t3.large"]
    capacity_type  = "SPOT"
    scaling_config = {
      desired_size = 1
      max_size     = 3
      min_size     = 1
    }
    disk_size = 100
    labels = {
      WorkloadType = "monitoring"
    }
    taints = [
      {
        key    = "workload-type"
        value  = "monitoring"
        effect = "NO_SCHEDULE"
      }
    ]
  }
}

# Additional Tags
tags = {
  Project    = "MyProject"
  CostCenter = "Engineering"
  Backup     = "Required"
}
